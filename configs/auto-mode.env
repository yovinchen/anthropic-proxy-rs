# ============================================================
# Auto/Gateway 模式配置 (智能路由 + 双向转换)
# ============================================================
# 
# 用途: 根据模型名称自动路由到对应后端，支持双向协议转换
# 适用场景: 统一 API 网关，同时支持 Anthropic 和 OpenAI 模型
#
# 请求流程:
#   Anthropic 请求 + Claude 模型 → 透传到 Anthropic
#   Anthropic 请求 + GPT 模型   → 转换后发送到 OpenAI
#   OpenAI 请求 + GPT 模型     → 透传到 OpenAI
#   OpenAI 请求 + Claude 模型  → 转换后发送到 Anthropic
#
# ============================================================

# 路由模式: auto 或 gateway
# auto: 自动路由
# gateway: 完整网关模式 (功能相同)
ROUTING_MODE=auto

# ============================================================
# Anthropic 后端配置
# ============================================================

ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-api-key

# ============================================================
# OpenAI 后端配置
# ============================================================

OPENAI_BASE_URL=https://api.openai.com
OPENAI_API_KEY=sk-your-openai-api-key

# ============================================================
# 备用上游配置 (可选，用于 A→O 转换时的备选)
# ============================================================

# UPSTREAM_BASE_URL=https://openrouter.ai/api
# UPSTREAM_API_KEY=sk-or-v1-your-openrouter-api-key

# ============================================================
# 模型覆盖配置 (可选)
# ============================================================

# REASONING_MODEL=anthropic/claude-3.5-sonnet
# COMPLETION_MODEL=anthropic/claude-3-haiku

# ============================================================
# 服务配置
# ============================================================

PORT=3000
DEBUG=false
VERBOSE=false

# ============================================================
# 测试命令
# ============================================================
#
# 1. 启动代理:
#    anthropic-proxy --config configs/auto-mode.env
#
# 2. 测试 Anthropic 端点 + Claude 模型 (透传):
#    curl http://localhost:3000/v1/messages \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "claude-3-5-sonnet-20241022",
#        "max_tokens": 100,
#        "messages": [{"role": "user", "content": "Hello Claude!"}]
#      }'
#
# 3. 测试 Anthropic 端点 + GPT 模型 (A→O 转换):
#    curl http://localhost:3000/v1/messages \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "gpt-4",
#        "max_tokens": 100,
#        "messages": [{"role": "user", "content": "Hello GPT!"}]
#      }'
#
# 4. 测试 OpenAI 端点 + GPT 模型 (透传):
#    curl http://localhost:3000/v1/chat/completions \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "gpt-4",
#        "messages": [{"role": "user", "content": "Hello GPT!"}]
#      }'
#
# 5. 测试 OpenAI 端点 + Claude 模型 (O→A 转换):
#    curl http://localhost:3000/v1/chat/completions \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "claude-3-5-sonnet-20241022",
#        "messages": [{"role": "user", "content": "Hello Claude!"}]
#      }'
#
# ============================================================
# 路由规则
# ============================================================
#
# 模型名称匹配规则:
#   claude*, anthropic/* → Anthropic 后端
#   gpt*, o1*, o3*, openai/* → OpenAI 后端
#   其他 → OpenAI 后端 (默认)
#
# ============================================================
